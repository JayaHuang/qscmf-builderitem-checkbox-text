!function(e){var t=function(e){this.el=e,this._init()};t.prototype={_init:function(){this.input=document.createElement("input"),this.input.type="hidden",this.input.name=this.el.getAttribute("name"),this.input.value=this.el.getAttribute("value"),this.el.appendChild(this.input),this._createDom()},_createDom:function(){var e=this;this.option=JSON.parse(this.el.getAttribute("option"));var t=JSON.parse(this.input.value||"[]");this.option.forEach((function(n){var c=t.find((function(e){return e.key===n.key})),i=e._createItem(n,c);e.el.appendChild(i)}))},_createItem:function(e,t){var n=this,c=document.createElement("div");c.className="qs-checkbox-text-container",this.el.appendChild(c);var i=document.createElement("div");i.className="qs-checkbox-text-box",c.appendChild(i);var a=document.createElement("div");a.className="qs-checkbox-text-div",t&&t.checked&&(a.className="qs-checkbox-text-div checked"),i.appendChild(a);var s,h=document.createElement("span");return h.className="qs-checkbox-text-label",h.innerText=e.title,i.appendChild(h),e.need_text&&((s=document.createElement("input")).type="text",s.className="qs-checkbox-text-input",t&&t.checked&&(s.className="qs-checkbox-text-input checked"),t&&t.text&&(s.value=t.text),c.appendChild(s),s.addEventListener("change",(function(t){n._dump(e.key,!0,t.target.value)}))),i.addEventListener("click",(function(t){n._toArray(a.classList).indexOf("checked")>-1?(a.className="qs-checkbox-text-div",e.need_text&&(s.className="qs-checkbox-text-input"),n._dump(e.key,!1)):(a.className="qs-checkbox-text-div checked",e.need_text?(s.className="qs-checkbox-text-input checked",n._dump(e.key,!0,s.value)):n._dump(e.key,!0))})),c},_dump:function(e,t,n){var c=JSON.parse(this.input.value||"[]"),i=!1;if(c.forEach((function(c){c.key==e&&(c.checked=t,t&&n&&(c.text=n),i=!0)})),!1===i){var a={};a.key=e,a.checked=t,t&&n&&(a.text=n),c.push(a)}(c=c.filter((function(e){return e.checked}))).length>0?this.input.value=JSON.stringify(c):this.input.value=""},_toArray:function(e){for(var t=[],n=0;n<e.length;n++)t.push(e[n]);return t}},e.QsCheckBoxText=t}(window);